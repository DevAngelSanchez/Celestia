---
import "@/styles/global.css";
import { Title } from "@/components/ui/Title";
import api from "@/config/axios/api";
import type { ProductVariant } from "@/lib/mock-data";
import { ProductCard } from "@/components/cards/ProductCard";

const response = await fetch(`${Astro.url.origin}/api/productVariants/`);
const productVariants: ProductVariant[] = await response.json();

const products = productVariants.slice(0, 6).map((variant) => {
  return {
    id: variant.id,
    name: variant.product.name + " " + variant.color,
    description: variant.product.description,
    price: variant.price,
    imageUrl: variant.images[0].image,
  };
});
---

<section class="w-full py-8">
  <div class="container mx-auto">
    <Title>Productos Destacados</Title>
    <div
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-5 mt-5"
    >
      {products.map((product) => <ProductCard product={product} client:load />)}
    </div>
  </div>
</section>
